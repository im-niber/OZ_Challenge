# django-youtube-restapi

## Docker란?

도커란 리눅스의 응용 프로그램들을 프로세스 격리 기술을 사용해 컨테이너로 실행하고 관리하는 오픈소스입니다.

VM과 달리 커널을 공유해서 사용하므로 성능향상, 이식성의 장점이 있습니다. 대신 VM 보다 보안성이 떨어집니다.

> 도커란 결국 가상머신이 아니라 프로세스를 실행하는 방법입니다. 커널 내부의 cgroup 을 사용하여 나머지 프로세스와 구분되는 프로세스입니다.

## Docker 구성요소

- Docker Daemon: Dokcer API 요청을 수신하고, 이미지, 컨테이너 등 도커 객체 관리. 다른 데몬과 통신하여 도커 서비스 관리 가능
- Docker Client: 사용자가 도커와 상호작용하는 기본 방법(Docker API). 둘 이사으이 데몬과 통신 가능
- Docker Registry: 도커 이미지를 저장, 도커 허브는 누구나 사용할 수 있는 공개형 레지스트리. docker pull/run: 레지스트리에서 이미지 가져옴, docker push: 레지스트리에 이미지 푸시
- Docker Hub: SaaS 기반의 클라우드 서비스로 도커 이미지 공유 가능
- Docker Object: 이미지 컨테이너 네트워크 볼륨 등에 관한 객체
- Docker Image: 컨테이너를 실행할 수 있는 실행파일, 설정 값 들을 가지고 있는것
- Docker Container: 이미지를 배포하여 실행한 상태, 단일 이미지를 다수 컨테이너에서 구동가능 

## Docker Image와 Docker Container

Docker Image란 컨테이너를 실행할 수 있는 실행파일입니다. 

만약 ubuntu 이미지를 만들기 위해 Layer A B C가 필요하고, 여기서 nginx 이미지를 만든다고 할 때는 ubuntu 이미지를 베이스 이미지로 사용하고 여기 위에 nginx 이미지를 더하기만 하면 됩니다. web app 이미지를 만드는 경우에도 nginx를 베이스 이미지로 두고, web app을 올려서 이미지를 만들기만 하면 됩니다.

Docker Container는 OS 레벨의 가상화로 프로세스를 격리시켜 동작하는 방식으로 이루어집니다. 다수의 컨테이너를 OS 커널에서 직접 구동합니다. 운영체제 전체 부팅보다 메모리를 훨씬 적게 차지하는 장점이 있습니다.

### Container 내부에 여러개 앱 vs 하나의 앱 ?

원칙적으로 하나의 컨테이너에 하나의 앱(프로세스) 단위로 구축하고 여러 컨테이너를 결합하는 것이 좋습니다.

컨테이너를 만드는 비용이 매우 저렴하기 때문에 복잡한 컨테이너를 하나 만드는 것보다 단순한 컨테이너를 여러 개 만드는 것이 더 효율적이고 나중에 설계를 변경하기도 쉽습니다.

> https://docs.docker.com/build/building/best-practices/#decouple-applications

> MySQL 앱을 다른 컨테이너로 만들고 네트워킹 해야하는 경우에는 동일한 네트워크에 배치를 하는 방법이 있습니다.
> https://docs.docker.com/get-started/07_multi_container/

### Container 내부에 있는 OS ?

도커의 컨테이너는 호스트 OS의 동일한 커널 위에서 돌아간다고 했는데, 막상 컨테이너에는 리눅스를 설치해서 사용하고 있습니다.

하지만 컨테이너 내부의 OS는 컨테이너 이미지가 종속된 Linux 이미지의 일종인 파일 시스템 스냅샷일 뿐입니다. 실제 OS랑은 다릅니다.

모든 컨테이너에는 최소한의 루트 파일 시스템이 있어야 하기 때문에 이런 이미지를 사용해야 하는것이죠.
