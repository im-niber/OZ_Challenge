이번엔 다양한 보조기억장치들에 대해서 살펴보겠슴니다.

## 하드디스크 - 구성

하드디스크의 구성으로는 스핀과, 플래터, 헤드, 디스크 암 등이 존재합니다. 이 플래터는 LP판 처럼 생겼는데 여러 장을 사용하며, 양면을 모두 사용합니다. 또 하드디스크는 자기적인 방식으로 데이터를 저장합니다.

일반적으로 모든 헤드가 디스크 암에 부착되어 함께 이동댐니다. 면 마다 헤드가 달려있슴니다.

헤드가 돌아가면서 데이터를 찾아서 필요한 기기에게 데이터 버스에 담아서 전송함니다.

### 하드디스크 - 저장 단위

기본적으로 트랙과 섹터 단위로 데이터를 저장합니다. 플래터의 한 면에 트랙이 존재하고 트랙의 일정 구간을 섹터라고 합니다. 하나 이상의 섹터를 묶어 블록이라고 표현하기도 합니다. 섹터의 크기는 512byte ~ 4096byte입니다.

또 실린더라는 단위가 존재하는데, 이는 여러 겹의 플래터 상에서 같은 트랙이 위치 한 곳을 모아 연결한 논리적 단위입니다. 수 많은 헤드는 따로 움직이는게 아니라 같이 움직이기때문에 해당 열? 에 위치한 데이터도 묶어서 단위로 표현하는게 필요할 수 있겠져

그리고 보통 연속된 정보는 한 실린더에 기록된다고 합니다.

### 하드디스크 - 데이터 접근 과정

하드디스크가 저장된 데이터에 접근하는 시간은 아래의 경우로 이루어져있습니다.

- 탐색 시간: 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간. 데이터가 있는 트랙까지 헤드를 움직입니다.

- 회전 지연: 헤드가 있는 곳으로 플래터를 회전시키는 시간. 데이터가 있는 트랙에 왔다면 회전을 시켜서 찾는 데이터와 헤드를 일치시켜줍니다.

- 전송 시간: 하드디스크와 컴퓨터 간에 데이터를 전송하는 시간

## 플래시 메모리

SSD, USB 등이 존재합니다.

전기적으로 데이터를 읽고 쓰는 반도체 기반 저장 장치입니다. 하지만 범용성이 넓기에 보조기억장치에만 속한다고 보기는 어렵습니다.

종류

- NAND 플래시 메모리
- NOR 플래시 메모리

주로 NAND 플래시 메모리를 사용합니다. 그래서 설명도 요기에 초점이 맞춰져있슴니다.

### 셀 cell

- 플래시 메모리에서 데이터를 저장하는 가장 작은단위
- 이 셀이 모이고 모여서 MB, GB, TB 저장장치가 됨니다.

- 한 셀에 1비트를 저장할 수 있는 플래시 메모리: SLC  
- 2비트 : MLC
- 3비트 : TLC
- 4비트 : QLC

사람 한 명은 1비트라고 하면 셀 은 집이라고 생각하면 이해가 쉽습니다.

SLC는 한 집에 한 명, MLC는 한 집에 두명, TLC는 한 집에 세명임니다

### SLC, MLC, TLC

SLC

- 한 셀로 두 개의 정보 표현
- 비트의 빠른 입출력
- 긴 수명
- 용량 대비 고가격

MLC

- 한 셀로 네 개의 정보 표현 (대용량화 유리)
- SLC 보다 느린 입출력
- SLC 보다 짧은 수명
- SLC 보다 저렴
- 시중에서 많이 사용 MLC TLC QLC

TLC

- 한 셀로 여덟 개의 정보 표현 (대용량 유리)
- MLC 보다 느린 입출력
- MLC 보다 짧은 수명
- MLC 보다 저렴
- 시중에서 많이 사용 MLC TLC QLC

### 셀의 저장단위

- 셀들이 모여 페이지(page)
- 페이지들이 모여 블록(block)
- 블록이 모여 플레인(plane)
- 플레인이 모여 다이(die)

읽기/쓰기 단위와 삭제 단위는 다릅니다. 

- 읽기/쓰기는 페이지 단위로 이루어지고
- 삭제는 페이지보다 큰 블록 단위로 이루어집니다

### 페이지의 상태

- Free 상태: 어떠한 데이터를 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
- Valid 상태: 이미 유효한 데이터를 저장하고 있는 상태
- Invalid 상태: 유효하지 않은 데이터(쓰레기 값)를 저장하고 있는 상태

> 플래시 메모리는 하드디스크와 달리 덮어쓰기가 불가능합니다.

### 동작 예시

블록 한개 내부에 정사각형 페이지 4개가 있을때 2*2 격자. 1행에는 A B가 저장되어있다면, 새로 C를 저장하려면 2행 1열에 C가 저장됩니다. 

이때 C, B는 그대로 둔채 A를 A`로 수정하는 방법은 기존 A를 Invalid 상태로 만든다음에 새로운 페이지에 A`를 저장하는 방식으로 수정합니다.

이 방식으로 Invalid 상태인 페이지가 많이 생긴다면 낭비가 되겠져 이를 방지하기 위해서 가비지 컬렉션을 사용합니다.

- 유효한 페이지들만을 새로운 블록으로 복사
- 기존 블록 삭제

## RAID?

1 테라바이트 하드디스크 4개로 RAID를 구성하면 4 TB 하드디스크 한 개의 성능과 안전성을 능가할 수 있습니다.

RAID(Redundant Array of Independent Disks)의 정의는 다음과 같습니다.

- 하드디스크와 SSD로 사용하는 기술
- 데이터의 안전성 혹은 높은 성능을 위해 여러 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술

RAID 레벨이라는 용어가 있슴니다.

- RAID를 구성하는 기술
- RAID 0, RAID 1, 2, 3, 4, 5, 6

### RAID 0

데이터를 단순히 나누어 저장하는 구성 방식입니다.

1TB 하드디스크 4개가 있고, 4TB 데이터를 저장한다고 하면, 번갈아가면서 데이터를 저장하는 방식입니다.

> 스트라입(stripe): 마치 줄무늬처럼 분산되어 저장된 데이터
> 스트라이핑(striping): 분산하여 저장하는 것

장점으로는 입출력 속도를 향상 시킬 수 있습니다.

단점으로는 저장된 정보가 안전하지 않습니다. 

만약 영화 데이터가 여러 하드디스크에 분산되어 있는 경우에 영화데이터를 저장하고 있는 하드디스크 하나가 고장이 나면 다른 쪽에서도 활용할 수 없습니다.

### RAID 1

미러링: 복사본을 만드는 방식, 데이터를 쓸 때 원본과 복사본 두군데에 씁니다.(느린 쓰기 속도)

또 하드 디스크 개수가 한정되었을 때 사용가능한 용량이 적어집니다. 복사본이 만들어지는 용량만큼 사용불가 -> 많은 양의 하드디스크가 필요 -> 비용증가

### RAID 4

RAID 1 처럼 완전한 복사본을 만드는 대신, 오류를 검출하고 복구하기 위한 정보도 하드디스크에 저장합니다.

이를 패리티 비트라고 합니다. 패리티를 저장한 장치를 이용해 다른 장치들의 오류를 검출하고, 오류가 있다면 복구합니다. 이를 통해 RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관 가능합니다.

단점으로는 패리티 디스크의 병목이 생길 수 있습니다. 데이터를 쓰기 작업할 때 매번 확인해야하기 때문임니다.

### RAID 5

패리티 정보를 분산하여 저장하는 방식. RAID 4 의 병목현상을 좀 줄였다고 볼 수 있슴니다.

### RAID 6

두 종류의 패리티(오류를 검출하고 복구할 수 있는 수단). RAID 5보다 안전, 쓰기는 RAID 5보다 느림

---

각 RAID 레벨마다 장단점이 있습니다. 어떤 상황에서 무엇을 최우선으로 원하는지에 따라 최적의 RAID 레벨은 달라질 수 있습니다. 각 RAID 레벨의 대략적인 구성과 특징을 아는 것이 중요합니다.